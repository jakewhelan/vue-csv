(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{652:function(e,a,r){var t=r(672);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,r(190).default)("efe6f23a",t,!0,{})},653:function(e,a,r){var t=r(674);"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);(0,r(190).default)("4a54bb3e",t,!0,{})},671:function(e,a,r){"use strict";var t=r(652);r.n(t).a},672:function(e,a,r){(a=r(189)(!1)).push([e.i,".loading[data-v-3b36fec0]{width:100%}.message[data-v-3b36fec0]{width:100%;text-align:center;height:40px;display:block;color:#323330;font-family:'Segoe UI', Helvetica, Arial, sans-serif;font-size:36px;line-height:40px}.sk-cube-grid[data-v-3b36fec0]{width:200px;height:200px;margin:100px auto}.sk-cube-grid .sk-cube[data-v-3b36fec0]{width:33%;height:33%;background-color:#f5da55;float:left;animation:sk-cubeGridScaleDelay-data-v-3b36fec0 1.3s infinite ease-in-out}.sk-cube-grid .sk-cube1[data-v-3b36fec0]{animation-delay:0.2s}.sk-cube-grid .sk-cube2[data-v-3b36fec0]{animation-delay:0.3s}.sk-cube-grid .sk-cube3[data-v-3b36fec0]{animation-delay:0.4s}.sk-cube-grid .sk-cube4[data-v-3b36fec0]{animation-delay:0.1s}.sk-cube-grid .sk-cube5[data-v-3b36fec0]{animation-delay:0.2s}.sk-cube-grid .sk-cube6[data-v-3b36fec0]{animation-delay:0.3s}.sk-cube-grid .sk-cube7[data-v-3b36fec0]{animation-delay:0s}.sk-cube-grid .sk-cube8[data-v-3b36fec0]{animation-delay:0.1s}.sk-cube-grid .sk-cube9[data-v-3b36fec0]{animation-delay:0.2s}@keyframes sk-cubeGridScaleDelay-data-v-3b36fec0{0%,70%,100%{transform:scale3D(1, 1, 1)}35%{transform:scale3D(0, 0, 1)}}\n",""]),e.exports=a},673:function(e,a,r){"use strict";var t=r(653);r.n(t).a},674:function(e,a,r){(a=r(189)(!1)).push([e.i,".loading[data-v-6026594c]{margin-top:100px}.drop-area[data-v-6026594c]{position:absolute;top:50px;left:0;width:100%;height:calc(100% - 50px);background:#f5da55;opacity:.6}.drop-area-text[data-v-6026594c]{position:absolute;display:block;margin:0 auto;top:50%;left:0;right:0;text-align:center;width:300px;transform:translateY(-50%);font-size:28px;font-family:'Segoe UI', Helvetica, Arial, sans-serif}h1[data-v-6026594c]{margin-top:80px;font-size:28px;color:#2f363c;text-align:center;font-family:'Segoe UI', Helvetica, Arial, sans-serif}h1.errorShown[data-v-6026594c]{margin-top:0}.upload-button[data-v-6026594c]{margin:50px auto 0}.error-announcement[data-v-6026594c]{background:#c00;padding:8px 20px;border-radius:20px;display:block;margin:27px auto 0;max-width:800px;text-align:center;cursor:pointer;margin-bottom:10px;font-size:18px}\n",""]),e.exports=a},677:function(e,a,r){"use strict";r.r(a);r(58),r(137);var t=r(105),i=(r(300),r(295)),n=r(640),o="Sorry, but the provided file is invalid",s=function(e){return e.name.substring(e.name.lastIndexOf(".")+1)},l=function(e){if(function(e){var a=e.items,r=e.files;if(!r.length)return!0;var t,i=Object(n.a)(a);try{for(i.s();!(t=i.n()).done;){var o=t.value.webkitGetAsEntry();if(null==o?void 0:o.isDirectory)return!0}}catch(e){i.e(e)}finally{i.f()}var s,l=Object(n.a)(r);try{for(l.s();!(s=l.n()).done;){var c=s.value,d=c.type,u=c.size;if(!d&&u%4096==0)return!0}}catch(e){l.e(e)}finally{l.f()}return!1}(e)||e.items.length>1)return{file:null,error:"Sorry, only 1 file is allowed at a time"};var a=Object(i.a)(e.items,1)[0];if("file"!==a.kind)return{file:null,error:o};var r=a.getAsFile();return r?"csv"!==s(r)?{file:null,error:"Sorry, only .CSV files are allowed"}:{file:r}:{file:null,error:o}},c={name:"core-loading",props:{message:{type:String,default:"Loading please wait..."}}},d=(r(671),r(106)),u=Object(d.a)(c,(function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"loading"},[this._m(0),this._v(" "),a("div",{staticClass:"message"},[this._v("\n    "+this._s(this.message)+"\n  ")])])}),[function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"sk-cube-grid"},[r("div",{staticClass:"sk-cube sk-cube1"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube2"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube3"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube4"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube5"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube6"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube7"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube8"}),e._v(" "),r("div",{staticClass:"sk-cube sk-cube9"})])}],!1,null,"3b36fec0",null).exports,f=r(642),p=r(192),v=r(43),b=r(9),h=r(44),g={name:"csv-dashboard-upload",components:{CoreLoading:u,CoreButton:f.a},mounted:function(){window.addEventListener("dragenter",this.showDropArea)},beforeDestroy:function(){window.removeEventListener("dragenter",this.showDropArea)},data:function(){return{dropEnabled:!1,loading:!1,error:""}},computed:{isDropAllowed:function(){return this.dropEnabled&&!this.loading},hasError:function(){return Boolean(this.error)}},methods:{uploadCSV:function(e){var a=this;return Object(t.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.loading=!0,r.next=3,p.a.uploadCSV(e).catch((function(){return!1}));case 3:r.sent?h.a.currentRoute.name===b.a.DashboardUpload.name&&v.a.goToDashboard():(a.loading=!1,a.error="There was a problem uploading your CSV");case 5:case"end":return r.stop()}}),r)})))()},uploadFile:function(){this.$refs.fileUploadInput.click()},onFileUpload:function(e){var a=function(e){if(0===e.length||!e[0])return{file:null,error:o};if(e.length>1)return{file:null,error:"Sorry, only 1 file is allowed at a time"};var a=Object(i.a)(e,1)[0];return"csv"!==s(a)?{file:null,error:"Sorry, only .CSV files are allowed"}:{file:a}}(e.target.files),r=a.file,t=a.error;null!==r?(this.error="",this.uploadCSV(r)):this.error=t},showDropArea:function(){this.dropEnabled=!0},hideDropArea:function(){this.dropEnabled=!1},allowFileDrop:function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},onFileDrop:function(e){var a=e.dataTransfer;if(a){var r=l(a),t=r.file,i=r.error;if(null===t)return this.error=i,void this.hideDropArea();this.error="",this.hideDropArea(),this.uploadCSV(t)}}}},m=(r(673),Object(d.a)(g,(function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isDropAllowed,expression:"isDropAllowed"}],staticClass:"drop-area",on:{drop:function(a){return a.stopPropagation(),a.preventDefault(),e.onFileDrop(a)},dragenter:function(a){return a.preventDefault(),e.allowFileDrop(a)},dragleave:function(a){return a.preventDefault(),e.hideDropArea(a)},dragover:function(a){return a.preventDefault(),e.allowFileDrop(a)}}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isDropAllowed,expression:"isDropAllowed"}],staticClass:"drop-area-text",on:{drop:function(a){return a.stopPropagation(),a.preventDefault(),e.onFileDrop(a)},dragenter:function(a){return a.preventDefault(),e.allowFileDrop(a)},dragover:function(a){return a.preventDefault(),e.allowFileDrop(a)}}},[e._v("\n    Drop file here to upload\n  ")]),e._v(" "),e.loading?r("div",[r("CoreLoading",{staticClass:"loading",attrs:{message:"Uploading and parsing your .CSV file"}})],1):r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"error-announcement"},[e._v("\n      "+e._s(e.error)+"\n    ")]),e._v(" "),r("h1",{class:{errorShown:e.hasError}},[e._v("\n      Click upload or drop a .CSV file onto this page to begin uploading\n    ")]),e._v(" "),r("CoreButton",{staticClass:"upload-button",attrs:{large:""},on:{click:e.uploadFile}},[e._v("\n      Upload\n    ")]),e._v(" "),r("input",{ref:"fileUploadInput",attrs:{type:"file",hidden:""},on:{change:e.onFileUpload}})],1)])}),[],!1,null,"6026594c",null));a.default=m.exports}}]);